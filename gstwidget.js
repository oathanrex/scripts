/*!
 * gstwidget.js v1.0.2
 * Copyright 2014-2021, Oathanrex
 *
 * For suggestions and any issues please contact us at:
 * https://oathanrex.blogspot.com/p/contact.html
 */
(function(){var c;if(window.jQuery===undefined||window.jQuery.fn.jquery!=="3.2.1"){var d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js");if(d.readyState){d.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){b()}}}else{d.onload=b}(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(d)}else{c=window.jQuery;a()}function b(){c=window.jQuery.noConflict(true);a()}function a(){c(document).ready(function(i){var e=i("#calcwidgetscript").attr("src");console.log(e);var g=e.split("/").slice(0,-1).join("/");console.log(g);var f=i("<link>",{rel:"stylesheet",type:"text/css",href:g+"/cw-style.css"});f.appendTo("head");var h=g+"/gst.php?"+setParameters()+"&callback=?";i.getJSON(h,function(j){i("#cw-calc").html(j.html)}).fail(function(l,m,j){var k=m+", "+j;console.log("Request Failed: "+k)}).done(function(){if(typeof i("#country").val()==="undefined"){selectedCountry=i("#SingleCountry").val()}else{loadCountries(i);selectedCountry=i("#country").val()}setCurrency(selectedCountry);loadRates(i,selectedCountry);i(".decimal").keydown(function(j){if(!(isDecimalKey(j,this.value))){j.preventDefault()}});i(".decimal").keyup(function(j){this.value=this.value.replace(",",".");if(isNaN(this.value)||this.value==""){i(".decimal").val("");return}calculateGST(i,this.id,parseFloat(this.value))});i(".clear").click(function(j){j.preventDefault();i(".decimal").val("")});i("#country").change(function(){i(".decimal").val("");selectedCountry=i("#country").val();setCurrency(selectedCountry);loadRates(i,selectedCountry)});i("#gstrate").change(function(){i(".decimal").val("");setSelectedRate(i)})})})}})();function setParameters(){var b=[];var c=document.getElementById("calc-settings");for(var a=0;a<c.attributes.length;a++){attr=c.attributes[a];if(/^data-/.test(attr.nodeName)){key=attr.nodeName.replace(/^data-/,"");value=attr.nodeValue;b.push(key+"="+value)}}return encodeURI(b.join("&"))}var countries=[{countryName:"Australia",abbreviation:"AU"},{countryName:"Canada",abbreviation:"CA"},{countryName:"New Zealand",abbreviation:"NZ"},{countryName:"",abbreviation:"NON"},{countryName:"Egypt",abbreviation:"EG"},{countryName:"Jersey",abbreviation:"JE"},{countryName:"Jordan",abbreviation:"JO"},{countryName:"India",abbreviation:"IN"},{countryName:"Malaysia",abbreviation:"MY"},{countryName:"Maldives",abbreviation:"MV"},{countryName:"Papua New Guinea",abbreviation:"PG"},{countryName:"Singapore",abbreviation:"SG"}];var GSTRates=[];GSTRates.AU={countryName:"Australia",currency:"$",gstRate:10,reducedRate:[]};GSTRates.CA={countryName:"Canada",currency:"$",gstRate:5,reducedRate:[]};GSTRates.NZ={countryName:"New Zealand",currency:"$",gstRate:15,reducedRate:[]};GSTRates.EG={countryName:"Egypt",currency:"£",gstRate:10,reducedRate:[]};GSTRates.JE={countryName:"Jersey",currency:"£",gstRate:5,reducedRate:[]};GSTRates.JO={countryName:"Jordan",currency:"JD",gstRate:16,reducedRate:[4]};GSTRates.IN={countryName:"India",currency:"₹",gstRate:28,reducedRate:[18,12,5]};GSTRates.MY={countryName:"Malaysia",currency:"RM",gstRate:6,reducedRate:[]};GSTRates.MV={countryName:"Maldives",currency:"MRf",gstRate:6,reducedRate:[]};GSTRates.PG={countryName:"Papua New Guinea",currency:"K",gstRate:10,reducedRate:[]};GSTRates.SG={countryName:"Singapore",currency:"$",gstRate:7,reducedRate:[]};function loadCountries(a){a("#country").empty();SingleCountry=a("#SingleCountry").val();if(SingleCountry=="ALL"){a.each(countries,function(b,c){if(c.abbreviation=="NON"){a("#country").append("<option disabled value='NON'></option>")}else{a("#country").append("<option value='"+c.abbreviation+"'> "+c.countryName+"</option>")}})}}function loadRates(b,a){b("#gstrate").empty();b("#gstrate").html("<option value='"+GSTRates[a].gstRate.toString()+"'> "+GSTRates[a].gstRate.toString()+"% </option>");b.each(GSTRates[a].reducedRate,function(c,d){b("#gstrate").append("<option value='"+d.toString()+"'> "+d.toString()+"%</option>")});b("#gstrate").prop("disabled",(GSTRates[a].reducedRate.length==0));setSelectedRate(b)}function setSelectedRate(a){gstRate=a("#gstrate").val();a("#GSTLabel").html("GST("+gstRate.toString()+"%)")}function setCurrency(d){var a=document.getElementsByClassName("currency");for(var b=0;b<a.length;++b){var c=a[b];c.innerHTML=GSTRates[selectedCountry].currency}}function calculateGST(d,f,b){if(isNaN(b)||b==""){return}gstRate=d("#gstrate").val()*1;var e=0,c=0,a=0;switch(f){case"GST":a=b;c=a*100/gstRate;e=c+a;break;case"GSTinclusive":e=b;a=e*gstRate/(100+gstRate);c=e-a;break;case"GSTexclusive":c=b;a=c*gstRate/100;e=c+a;break}if(f!="GSTexclusive"){d("#GSTexclusive").val(round2TwoDecimals(c))}if(f!="GSTinclusive"){d("#GSTinclusive").val(round2TwoDecimals(e))}if(f!="GST"){d("#GST").val(round2TwoDecimals(a))}}function isIntegerKey(a){var b=a.which||a.which||event.keyCode;var c=(b==8||b==9||b==46||(b>=35&&b<=40)||(b>=48&&b<=57)||(b>=96&&b<=105));return c}function isDecimalKey(c,b){var a=(c.which)?c.which:c.keyCode;if((a>=48&&a<=57)||(a>=96&&a<=105)||a==110||a==190||a==44||a==188||a==8||a==9||(35<=a&&a<=40)||a==46){if(a==110||a==190||a==44||a==188){if(b.indexOf(".")>-1||b.indexOf(",")>-1||b.length==0){return false}}return true}return false}function radioValue(b){var c="";var e=document.getElementsByName(b);for(var a=0,d=e.length;a<d;a++){if(e[a].checked){c=e[a].value}}return c}function round2TwoDecimals(a){return Math.round(a*100)/100}function isIntegerKey(a){var b=a.which||a.which||event.keyCode;var c=(b==8||b==9||b==46||(b>=35&&b<=40)||(b>=48&&b<=57)||(b>=96&&b<=105));return c}function isDecimalKey(c,b){var a=(c.which)?c.which:c.keyCode;if((a>=48&&a<=57)||(a>=96&&a<=105)||a==110||a==190||a==44||a==188||a==8||a==9||(35<=a&&a<=40)||a==46){if(a==110||a==190||a==44||a==188){if(b.indexOf(".")>-1||b.indexOf(",")>-1||b.length==0){return false}}return true}return false}function radioValue(b){var c="";var e=document.getElementsByName(b);for(var a=0,d=e.length;a<d;a++){if(e[a].checked){c=e[a].value}}return c}function round2TwoDecimals(a){return Math.round(a*100)/100};
